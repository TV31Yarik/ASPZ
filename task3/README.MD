# ЗАВДАННЯ ЗАГАЛЬНЕ ДЛЯ ВСІХ
## 3.1 Ліміт ресурсів
### Умова 
Запустіть Docker-контейнер і поекспериментуйте з максимальним лімітом ресурсів відкритих файлів. Для цього виконайте команди у вказаному порядку:
$ ulimit -n
$ ulimit -aS | grep "open files"
$ ulimit -aH | grep "open files"
$ ulimit -n 3000
$ ulimit -aS | grep "open files"
$ ulimit -aH | grep "open files"
$ ulimit -n 3001
$ ulimit -n 2000
$ ulimit -n
$ ulimit -aS | grep "open files"
$ ulimit -aH | grep "open files"
$ ulimit -n 3000

Як наступне вправу, повторіть перераховані команди з root-правами.
### Пояснення 
У цьому завданні я перевірив та змінив ліміт на кількість відкритих файлів у Docker-контейнері за допомогою команди ulimit
Спочатку я подивився поточний ліміт, а потім змінив його на 3000, 3001 і 2000, щоб побачити, як це впливає на систему
Також я повторив ці кроки з правами адміністратора  
З правами адміністратора можна змінювати ліміти ресурсів системи в тих ситуаціях коли звичайному користувачу не можна, що дає більше можливостей для керування та оптимізації роботи контейнера
![](task3.1/Screenshot%20from%202025-04-14%2017-30-14.png)
![](task3.1/Screenshot%20from%202025-04-14%2017-32-58.png)
![](task3.1/Screenshot%20from%202025-04-14%2017-34-16.png)

## 3.2 утилітf perf(1)
### Умова 
У Docker-контейнері встановіть утиліту perf(1). Поекспериментуйте з досягненням процесом встановленого ліміту.
### Пояснення 
![](task3.2/Screenshot%20from%202025-04-14%2017-40-16.png)<br>
На цьому скріншоті видно результат виконання команди perf stat, яка вимірює різні показники роботи процесу ls за 5 запусків
Відображені значення включають час виконання, кількість перемикань контексту та інші показники

## 3.3 Кубик
### Умова 
Напишіть програму, що імітує кидання шестигранного кубика. Імітуйте кидки, результати записуйте у файл, для якого попередньо встановлено обмеження на його максимальний розмір (max file size). Коректно обробіть ситуацію перевищення ліміту.
### Пояснення 
У програмі встановлюється обмеження на розмір файлу, що можна створити за допомогою системного виклику setrlimit. Для цього використовується обмеження типу RLIMIT_FSIZE, яке визначає максимальний розмір файлу в байтах.
Процес встановлення обмеження виглядає так:
Спочатку в коді визначається функція set_file_limit, яка приймає параметр size — максимальний розмір файлу в блоках (де один блок = 512 байтів).
Створюється структура rlimit, в якій обидва значення (м'яке та жорстке обмеження) встановлюються рівними size.
За допомогою системного виклику setrlimit(RLIMIT_FSIZE, &lim) задається максимальний розмір файлу.
Також у програмі налаштований обробник сигналу SIGXFSZ, який викликається, коли процес намагається створити файл, що перевищує встановлене обмеження. Обробник виводить повідомлення "Перевищено обмеження на розмір файлу" і завершить виконання програми.
Але на віртуальній машині в VirtualBox ці сигнали можуть не спрацьовувати належним чином. Тому скриншотів немає((
### [КОД](task3.3/main.c)<br>
## 3.4 Лотерея
### Умова 
Напишіть програму, що імітує лотерею, вибираючи 7 різних цілих чисел у діапазоні від 1 до 49 і ще 6 з 36.
Встановіть обмеження на час ЦП (max CPU time) і генеруйте результати вибору чисел (7 із 49, 6 із 36). Обробіть ситуацію, коли ліміт ресурсу вичерпано.
### Пояснення
Програма виконує лотерейний вибір чисел із двох діапазонів (7 чисел з 49 і 6 чисел з 36) і встановлює обмеження на час процесора за допомогою setrlimit. Ось основні моменти:
Обмеження на час ЦП:
Програма встановлює обмеження на максимальний час процесора через setrlimit(RLIMIT_CPU, &limit). Ліміт встановлений на 1 секунду, тобто після цієї секунди процес буде припинено.
Якщо ліміт часу ЦП перевищено, програмі надсилається сигнал SIGXCPU, який викликає функцію обробки handle_sigxcpu, що виводить повідомлення і завершує програму.

На VirtualBox сигнали можуть не спрацьовувати, якщо віртуальна машина не підтримує належну обробку сигналів або якщо система не налаштована на прийом таких сигналів. Тому скриншотів немає(((
### [КОД](task3.4/main.c)<br>

## 3.5 Копіювання
### Умова 
Напишіть програму для копіювання одного іменованого файлу в інший. Імена файлів передаються у вигляді аргументів.
Програма має:
перевіряти, чи передано два аргументи, інакше виводити "Program need two arguments";
перевіряти доступність першого файлу для читання, інакше виводити "Cannot open file .... for reading";
перевіряти доступність другого файлу для запису, інакше виводити "Cannot open file .... for writing";
обробляти ситуацію перевищення обмеження на розмір файлу.
### Пояснення
Ця програма копіює вміст одного файлу в інший. Вона перевіряє, чи можна відкрити файли для читання та запису, і зчитує дані блоками, щоб записати їх у новий файл
Якщо файл неможливо відкрити — виводиться повідомлення про помилку
### [КОД](task3.5/main.c)<br>
![](task3.5/Screenshot%20from%202025-04-14%2018-47-29.png)
![](task3.5/Знімок%20екрана%202025-04-14%20214115.png)
![](task3.5/Знімок%20екрана%202025-04-14%20214120.png)
## 3.6 обмеження (max stack segment size)
### Умова
Напишіть програму, що демонструє використання обмеження (max stack segment size). Підказка: рекурсивна програма активно використовує стек.
### Пояснення
Ця програма демонструє рекурсію з великою глибиною. Функція recursive_function викликає сама себе, зменшуючи лічильник глибини, доки не досягне нуля. Для кожного виклику створюється буфер у стеку, що при великій кількості викликів призводить до переповнення стеку і аварійного завершення програми.
### [КОД](task3.6/main.c)<br>
![](task3.6/Screenshot%20from%202025-04-14%2018-57-58.png)

# Завдання по ВАРІАНТАХ
## 4. максимальна кількість запущених процесів 
### Умова 
Реалізувати програму, що перевіряє максимальну кількість запущених процесів (ulimit -u).
### Пояснення 
Ця програма визначає максимальну кількість процесів, які може створити користувач, і намагається створити стільки дочірніх процесів за допомогою fork(). Якщо створення процесу не вдається, виводиться повідомлення про помилку. Це дозволяє експериментально перевірити обмеження на кількість одночасно запущених процесів у системі
### [КОД](task4/main.c)<br>
![](task4/Screenshot%20from%202025-04-14%2020-50-17.png)
